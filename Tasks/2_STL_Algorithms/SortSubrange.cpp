/**************************************************************************************************
*
* \file SortSubrange.cpp
* \brief C++ Training - Algorithm Programming Example
*
* Copyright (C) 2015-2022 Klaus Iglberger - All Rights Reserved
*
* This file is part of the C++ training by Klaus Iglberger. The file may only be used in the
* context of the C++ training or with explicit agreement by Klaus Iglberger.
*
* Task: Implement the 'sort_subrange' algorithm in the following example. The algorithm should
*       take four iterators, which specify the total range of elements and the subrange to be
*       sorted.
*
**************************************************************************************************/

#include <algorithm>
#include <cstdlib>
#include <iostream>
#include <vector>


// TODO: Implement the 'sort_subrange()' algorithm
template <typename Itor, typename Compare>
void sort_subrange(Itor first, Itor last, Itor rangeBegin, Itor rangeEnd, Compare comp)
{
    if (rangeBegin == rangeEnd) {
        return;
    }

    if (rangeBegin != first) {
        std::nth_element(first, rangeBegin, last, comp);
        ++rangeBegin;
    }

    std::partial_sort(rangeBegin, rangeEnd, last, comp);
}

template <typename Itor>
void sort_subrange(Itor first, Itor last, Itor rangeBegin, Itor rangeEnd)
{
    sort_subrange(first, last, rangeBegin, rangeEnd, std::less<>());
}

int main()
{
   
   std::vector<int> v{ 3, 2, 11, 5, 4, 6, 12, 7, 8, 9, 1, 10 };

   // Sort the subrange [begin+2,begin+6) within the range [begin,end) in ascending order
   sort_subrange( v.begin(), v.end(), v.begin()+2, v.begin()+6 );

   std::cout << "\n (";
   for( int i : v )
      std::cout << ' ' << i;
   std::cout << " )\n\n";

   // Sort the subrange [begin+3,begin+7) within the range [begin,end) in descending order
   sort_subrange( v.begin(), v.end(), v.begin()+3, v.begin()+7, std::greater<>() );

   std::cout << "\n (";
   for( int i : v )
      std::cout << ' ' << i;
   std::cout << " )\n\n";
   

   return EXIT_SUCCESS;
}
